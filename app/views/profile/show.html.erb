<h1>
  <span class="circular small ui image">
    <%= current_user.profile_picture %>
  </span>
  <%= "#{@user.first_name} #{@user.last_name}" %>
</h1>

<%= link_to sync_start_path, class: 'ui red button' do %>
  <i class="refresh icon"></i>
  Start synchronization
<% end %>

<h2 class="ui header">Synchronizations</h2>

<% if @syncs.empty? %>
    <p>Not yet synchronized. Please, <%= link_to 'start synchronization', sync_start_path %>.</p>
<% else %>
    <table class="ui table segment">
      <thead>
        <tr>
          <th>#</th>
          <th>Status</th>
          <th>Started</th>
          <th>Finished</th>
          <th>Emails</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% @syncs.each do |sync| %>
        <tr class="<%= sync_status_class(sync.status) %>">
          <td><%= sync.id %></td>
          <td>
            <% if sync.finished? %>
                <i class="icon checkmark"></i>
            <% else %>
                <i class="icon attention"></i>
            <% end %>
            <%= sync.status_readable %>
          </td>
          <td><%= Time.at(sync.started_at).to_formatted_s(:long) %></td>
          <td>
            <% if sync.finished? %>
                <%= Time.at(sync.finished_at).to_formatted_s(:long) %>
            <% else %>
                -
            <% end %>
          </td>
          <td><%= sync.email_count.to_i %></td>
          <td><%= link_to 'Details', sync_details_path(sync) %></td>
        </tr>
        <% end %>
      </tbody>
    </table>
<% end %>