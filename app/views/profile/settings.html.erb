<h2 class="ui header">
  <i class="settings icon"></i>
  Synchronization settings
</h2>

<%= render partial: 'partials/errors', locals: { model: @settings } %>

<%= form_for @settings, url: user_settings_path do |f| %>

  <div class="ui form segment">
    <div class="field">
      <%= f.label :filename_format, raw('Filename format <strong>Warning! All before synchronized files be uploaded again!</strong>') %>
      <%= f.text_field :filename_format, class: 'one' %>
      <div class="ui tiny horizontal list">
        <div class="item"><strong>Allowed parameters:</strong></div>
        <div class="item"><strong>%filename%</strong> - filename</div>
        <div class="item"><strong>%subject%</strong> - email subject</div>
      </div>
    </div>
    <div class="inline field">
      <%= f.check_box :convert_files %>
      <%= f.label :convert_files, 'Convert files to Google Drive format' %>
    </div>
  </div>

  <%= f.submit 'Update settings', class: 'ui blue submit button' %>
<% end %>

<h2 class="ui header">
  <i class="filter icon"></i>
  Filters
</h2>

<%= form_for @filters, url: user_settings_path do |f| %>

  <div class="ui form segment">
    <div class="ui left floated small header">
      Images
    </div>
    <small>
      <%= f.label :images_filters do %>
        <%= f.check_box :images_filters %>
        Use this rules
      <% end %>
    </small>
    <div class="ui clearing divider"></div>

    <div class="field">
      <label>Allowed extensions</label>
      <% Extension::IMAGES.each do |ext| %>
        <%= label_tag do %>
          <%= check_box_tag "user_filter[images_extensions][]", ext, @filters.images_extensions.to_a.include?(ext) %>
          <%= ext %>
        <% end %>
      <% end %>
    </div>

    <div class="fields two">
      <div class="field">
        <%= f.label :images_min_size, 'Minimal size (kb)' %>
        <%= f.text_field :images_min_size %>
      </div>
      <div class="field">
        <%= f.label :images_max_size, 'Maximal size (kb)' %>
        <%= f.text_field :images_max_size %>
      </div>
    </div>

    <div class="ui left floated small header">
      Documents
    </div>
    <small>
      <%= f.label :documents_filters do %>
        <%= f.check_box :documents_filters %>
        Use this rules
      <% end %>
    </small>
    <div class="ui clearing divider"></div>

    <div class="field">
      <label>Allowed extensions</label>
      <% Extension::DOCUMENTS.each do |ext| %>
        <%= label_tag do %>
          <%= check_box_tag "user_filter[documents_extensions][]", ext, @filters.documents_extensions.to_a.include?(ext) %>
          <%= ext %>
        <% end %>
      <% end %>
    </div>

    <div class="fields two">
      <div class="field">
        <%= f.label :documents_min_size, 'Minimal size (kb)' %>
        <%= f.text_field :documents_min_size %>
      </div>
      <div class="field">
        <%= f.label :documents_max_size, 'Maximal size (kb)' %>
        <%= f.text_field :documents_max_size %>
      </div>
    </div>
  </div>

  <%= f.submit 'Update filters', class: 'ui blue submit button' %>
<% end %>